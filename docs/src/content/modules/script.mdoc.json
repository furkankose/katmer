{
  "name": "script",
  "constraints": {
    "platform": {
      "any": true
    }
  },
  "source": "C:/Users/ayz/ws-webstorm/katmer/packages/core/modules/script.module.ts",
  "description": "Execute an ad-hoc shell script on the target.",
  "remarks": "- Accepts either a **string** (backwards compatible) or an **object** with a `content` string\n  and a `render` flag to enable/disable template rendering.\n- When `render` is `true` (default), the script string is rendered with Twig against `ctx.variables`\n  before execution. When `false`, the string is executed **as-is**.\n- Uses the provider's shell via [`ctx.exec`](#katmer-taskcontext-exec).\n- Return semantics are simple: `changed` is always `false`; `failed` is set when the exit code is non-zero.\n- Standard output and error are surfaced as `stdout` and `stderr`.",
  "parameters": [
    {
      "name": "ScriptModuleOptions",
      "type": "ScriptModuleOptions",
      "optional": false,
      "description": "You can pass a **raw string** which will be rendered using template engine,\nor an **object** to control rendering explicitly.",
      "union": {
        "alias": "",
        "branches": [
          {
            "label": "object",
            "fields": [
              {
                "name": "content",
                "type": "string",
                "optional": false,
                "description": "Inline script content to execute."
              },
              {
                "name": "render",
                "type": "boolean",
                "optional": true,
                "description": "Whether to render the script with Twig against `ctx.variables` before execution."
              }
            ]
          },
          {
            "label": "string",
            "description": "string"
          }
        ]
      }
    }
  ],
  "examples": "\n- name: Simple one-liner (rendering enabled by default):\n  script: \"echo Hello {{ env | default('world') }}\"\n\n- name: Multi-line script (rendering enabled by default):\n  script: |\n    set -euo pipefail\n    echo \"cwd={{ cwd }}\"\n    ls -la\n\n- name: Disable templating (execute exactly the given text):\n  script:\n    content: \"echo {{ literally-not-rendered }}\"\n    render: false\n\n- name: Conditional logic - restart service in prod\n  when: env == 'prod'\n  script: \"systemctl restart myapp || true\"\n",
  "returns": [
    {
      "name": "changed",
      "type": "boolean",
      "optional": true,
      "description": "Whether this module changed anything on the target."
    },
    {
      "name": "failed",
      "type": "boolean",
      "optional": true,
      "description": "Whether the module failed (non-zero exit code, validation failure, etc.)."
    },
    {
      "name": "msg",
      "type": "string",
      "optional": true,
      "description": "Human-readable message describing the outcome or error."
    },
    {
      "name": "stdout",
      "type": "string",
      "optional": true,
      "description": "Captured standard output, if available."
    },
    {
      "name": "stderr",
      "type": "string",
      "optional": true,
      "description": "Captured standard error, if available."
    },
    {
      "name": "start",
      "type": "string",
      "optional": true,
      "description": "ISO8601 timestamp when execution started (best-effort)."
    },
    {
      "name": "end",
      "type": "string",
      "optional": true,
      "description": "ISO8601 timestamp when execution ended (best-effort)."
    },
    {
      "name": "delta",
      "type": "string",
      "optional": true,
      "description": "Duration string, e.g., \"0:00:00.123\" (best-effort)."
    },
    {
      "name": "attempts",
      "type": "number",
      "optional": true,
      "description": "Number of attempts performed so far (e.g., by `until`).\nTypically increments from 1 upwards."
    },
    {
      "name": "retries",
      "type": "number",
      "optional": true,
      "description": "Maximum retries allowed for this operation (e.g., by `until`).\nThis reflects the configured ceiling, not the attempts taken."
    }
  ]
}
